# Chat with DB

A modern web application that enables natural language interactions with databases. 🗣️ ➡️ 💾 

This project explores AI automation techniques to query databases more efficiently, without requiring users to write SQL. Instead, users can interact with the database using natural language commands. The AI automation layer is powered by LangChain, a powerful AI automation library.

### Test Credentials 🔑
| Role  | Email | Password |
|-------|--------|----------|
| 👑 Admin | jane.smith@example.com | pass456 |
| 👤 User  | john.doe@example.com  | pass123 |

## Technology Stack 💻

### Frontend
- Next.js
- TypeScript
- Radix UI components
- Prisma Client
- Various UI libraries for enhanced user experience

### Backend
- Flask
- Flask-CORS
- SQLAlchemy
- Python 3.x
- Various AI and database interaction libraries (e.g., LangChain)

## Prerequisites

- Node.js (Latest LTS version)
- Python 3.x
- Docker (optional, for containerization)

### Database Setup
- Powered by Neon database platform
- Contains product data including:
  - Headwears 🧢
  - Pants 👖
  - Shirts 👕
  - Shoes 👟
  - Users  👤
  - Orders 🛒
  - Order Items 📦

### User Roles
1. **User Role** 👤
   - Access to RAG (Retrieval Augmented Generation) capabilities
   - Limited to RAG responses and own order details.

2. **Admin Role** 👑
   - Full database access including SQL-related capabilities
   - Access to RAG (Retrieval Augmented Generation) capabilities

### Security Note 
Both user and admin roles are restricted from performing DML (Data Manipulation Language) operations for data integrity. Feel free to try to break the system! 🛡️

### UI Components 🖥️

| Component | Description |
|-----------|-------------|
| **Login** 🚪 | Use the test credentials |
| **Products** 🛍️ | All the products in database |
| **FAQ** 📚 | Store related Q&A |
| **Chat Interface** 🗣️ | AI chatbot |
| **Database Interface** 💾 | Displays all the data in database for validating the AI replies |
| **User Orders** 🛒 | Users current orders |

## Installation

### Frontend Setup

1. Navigate to the frontend directory:
   ```bash
   cd frontend
   ```

2. Install dependencies:
   ```bash
   pnpm install
   ```

3. Create a `.env` file with necessary environment variables. An example `.env` file is provided in the `frontend/.env.example` file.

4. Run the development server:
   ```bash
   pnpm dev
   ```

The frontend will be available at `http://localhost:3000`

### Backend Setup

1. Navigate to the backend directory:
   ```bash
   cd backend
   ```

2. Create and activate a virtual environment:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

3. Install dependencies:
   ```bash
   pip3 install -r requirements.txt
   ```

4. Set up environment variables in `.env`. An example `.env` file is provided in the `backend/.env.example` file.

5. Run the Flask server:
   ```bash
   python3 app.py
   ```

The backend API will be available at `http://127.0.0.1:5000`

### Creating own database on Neon

1. Create a database on Neon and get the connection string

2. Dump a database to a Neon database
   ```bash
   pg_dump -Fc -v -d <source_database_connection_string> -f ./backend/data/db/chat-with-db.sql
   ```

## Docker Support

The project includes Docker configuration for both frontend and backend services. Use the provided Dockerfiles and docker-compose.yml for containerized deployment.

## Next steps

- The models.agents.RagSqlAgent has a method to load files into the database. You can use it to load data from PDF files to the database if needed. Adding support for other file types would be beneficial.

- Adding a text to speech feature for the response generated by the agent.

## Contributing

Feel free to submit issues and pull requests to improve the project.

## License

ISC License